(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[293],{7702:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return EditMatching}});var r=n(9499),i=n(29),s=n(7794),a=n.n(s),o=n(7294),c=n(6310),l=n(7533),d=n(7536),p=n(1150),u=n(3281),h=n(528),x=n(9630),m=n(3162),g=n(7731),f=n(7396),b=n(4471),j=n(3011),v=n(846),_=n(8381),y=n(8633),O=n(546),S=n(7903),w=n(8437),R=n(2386),I=n(7632),k=n(880),N=n(1163),Z=n(8031),P=n(381),D=n.n(P),T=n(5893);function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){(0,r.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var E=c.Ry().shape({title:c.Z_().required("제목을 입력해주세요."),matchingType:c.Z_().required("경기 유형을 선택해주세요."),recruitNum:c.Rx().required("모집 인원수를 선택해주세요."),ageGroup:c.Z_().required("모집 연령대를 선택해주세요."),ntrp:c.Z_().required("모집할 NTRP를 선택해주세요."),location:c.Z_().required("경기장 주소를 입력해주세요."),isReserved:c.O7().required("경기장 예약 여부를 선택해주세요."),cost:c.Z_().required("경기장 대여료를 입력해주세요"),locationImg:c.Z_(),content:c.Z_().required("본문 내용을 입력해주세요.")});function EditMatching(){var e,t,n,r=(0,N.useRouter)(),s=(0,Z.Z)().setMessage,c=(0,o.useState)(""),p=c[0],u=c[1],O=(0,o.useState)(""),P=O[0],V=O[1],X=(0,o.useState)(""),Y=X[0],$=X[1],J=(0,o.useState)(""),ee=J[0],et=J[1],en=(0,o.useState)(""),er=en[0],ei=en[1],es=(0,o.useRef)(null),ea=(0,o.useState)(null),eo=ea[0],ec=ea[1],el=(0,o.useState)(null),ed=el[0],ep=el[1],eu=(0,o.useState)(!1),eh=eu[0],ex=eu[1],em=(0,o.useState)(null),eg=em[0],ef=em[1],eb=(0,d.cI)({resolver:(0,l.X)(E)}),ej=eb.control,ev=eb.register,e_=(eb.handleSubmit,eb.setValue),ey=eb.getValues,eO=eb.watch;eb.formState.errors;var eS=(0,d.cI)(),ew=eS.register,eR=eS.handleSubmit;eS.setValue,eS.watch,eS.formState.errors;var clickImgFile=function(){es.current&&es.current.click()},handleAddressDrawer=function(){ex(function(e){return!e})},eI=(e=(0,i.Z)(a().mark(function _callee(e){var t;return a().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t={keyword:e.address},n.prev=1,n.next=4,S.Z.searchAddress(t);case 4:ef(n.sent.data.response),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),console.log(n.t0);case 11:case"end":return n.stop()}},_callee,null,[[1,8]])})),function(t){return e.apply(this,arguments)}),onClickAddressItem=function(e){handleAddressDrawer(),e_("location",e.jibunAddr)},ek=(t=(0,i.Z)(a().mark(function _callee2(e){var t;return a().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,S.Z.getDetailMatchingList(e);case 3:e_("title",(t=n.sent).data.response.title),e_("matchingType",t.data.response.matchingType),e_("recruitNum",t.data.response.recruitNum),e_("ageGroup",t.data.response.ageGroup),e_("ntrp",t.data.response.ntrp),u(t.data.response.date),V(t.data.response.startTime),$(t.data.response.endTime),et(D()(t.data.response.recruitDueDateTime).format("YYYY-MM-DD")),ei(D()(t.data.response.recruitDueDateTime).format("HH:mm")),e_("isReserved",t.data.response.isReserved),e_("cost",t.data.response.cost),e_("location",t.data.response.location),e_("content",t.data.response.content),ep(t.data.response.locationImg),n.next=24;break;case 21:n.prev=21,n.t0=n.catch(0),console.log("e",n.t0);case 24:case"end":return n.stop()}},_callee2,null,[[0,21]])})),function(e){return t.apply(this,arguments)}),eN=(n=(0,i.Z)(a().mark(function _callee3(){var e,t,n;return a().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(e={title:ey("title"),ageGroup:ey("ageGroup"),matchingType:ey("matchingType"),ntrp:ey("ntrp"),recruitNum:ey("recruitNum"),date:p,startTime:P,endTime:Y,recruitDueDate:ee,recruitDueTime:er.split(":")[0],isReserved:ey("isReserved"),cost:Number(ey("cost")),content:ey("content"),location:ey("location")},i.prev=1,t=null,!eo){i.next=9;break}return(n=new FormData).append("imageFile",eo),i.next=8,k.Z.uploadImgSignup(n);case 8:t=i.sent;case 9:return i.next=11,S.Z.modifyMatchingList(r.query.id,_objectSpread(_objectSpread({},e),{},{locationImg:t?t.data.response:ed}));case 11:200===i.sent.status&&(s("success","매칭 수정에 성공하셨습니다"),r.push("/")),i.next=18;break;case 15:i.prev=15,i.t0=i.catch(1),console.log(i.t0);case 18:case"end":return i.stop()}},_callee3,null,[[1,15]])})),function(){return n.apply(this,arguments)});return(0,o.useEffect)(function(){r.isReady&&ek(r.query.id)},[r.query]),(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(C,{children:(0,T.jsx)(h.B,{children:"매칭 글 수정"})}),(0,T.jsxs)(A,{children:[(0,T.jsxs)(x.W,{children:[(0,T.jsx)("label",{htmlFor:"postTitle",children:"제목"}),(0,T.jsx)("input",_objectSpread({type:"text"},ev("title")))]}),(0,T.jsxs)(Q,{children:[(0,T.jsxs)(x.W,{children:[(0,T.jsx)("label",{children:"경기 유형"}),(0,T.jsx)(d.Qr,{name:"matchingType",control:ej,render:function(e){var t=e.field;return(0,T.jsx)(m.A,_objectSpread(_objectSpread({},t),{},{options:[{value:"SINGLE",label:"단식"},{value:"DOUBLE",label:"복식"},{value:"MIXED_DOUBLE",label:"혼성 복식"},{value:"OTHER",label:"기타"}]}))}})]}),(0,T.jsxs)(x.W,{children:[(0,T.jsx)("label",{children:"모집 인원"}),(0,T.jsx)(d.Qr,{name:"recruitNum",control:ej,render:function(e){var t=e.field;return(0,T.jsx)(m.A,_objectSpread(_objectSpread({},t),{},{options:[{value:2,label:"2명"},{value:3,label:"3명"}]}))}})]})]}),(0,T.jsxs)(Q,{children:[(0,T.jsxs)(x.W,{children:[(0,T.jsx)("label",{children:"모집 연령대"}),(0,T.jsx)(d.Qr,{name:"ageGroup",control:ej,render:function(e){var t=e.field;return(0,T.jsx)(m.A,_objectSpread(_objectSpread({},t),{},{options:[{value:"TWENTIES",label:"20대"},{value:"THIRTIES",label:"30대"},{value:"FORTIES",label:"40대"},{value:"SENIOR",label:"50대 이상"}]}))}})]}),(0,T.jsxs)(x.W,{children:[(0,T.jsx)("label",{children:"모집 NTRP"}),(0,T.jsx)(d.Qr,{name:"ntrp",control:ej,render:function(e){var t=e.field;return(0,T.jsx)(m.A,_objectSpread(_objectSpread({},t),{},{options:[{value:"DEVELOPMENT",label:"NewBie (1.0 ~ 2.0)"},{value:"BEGINNER",label:"Beginner (2.5 ~ 3.5)"},{value:"INTERMEDIATE",label:"Intermediate (4.0 ~ 4.5)"},{value:"ADVANCE",label:"Advanced (5.0 ~ 5.5)"},{value:"PRO",label:"Pro (6.0 ~ 7.0)"}]}))}})]})]}),(0,T.jsxs)(x.W,{children:[(0,T.jsx)("label",{children:"경기일"}),(0,T.jsx)(b.Z,{dateState:p,setDateState:u})]}),(0,T.jsxs)(Q,{children:[(0,T.jsxs)(x.W,{children:[(0,T.jsx)("label",{children:"시작 시간"}),(0,T.jsx)(j.Z,{dateState:P,setDateState:V,isUpdate:!0})]}),(0,T.jsxs)(x.W,{children:[(0,T.jsx)("label",{children:"종료 시간"}),(0,T.jsx)(j.Z,{dateState:Y,setDateState:$,isUpdate:!0})]})]}),(0,T.jsxs)(x.W,{children:[(0,T.jsx)("label",{children:"모집마감일"}),(0,T.jsx)(b.Z,{dateState:ee,setDateState:et})]}),(0,T.jsxs)(x.W,{children:[(0,T.jsx)("label",{children:"모집마감시간"}),(0,T.jsx)(j.Z,{type:"HOUR",dateState:er,setDateState:ei,isUpdate:!0})]}),(0,T.jsxs)(x.W,{children:[(0,T.jsx)("label",{children:"경기장 예약 여부"}),(0,T.jsx)(v.Z,_objectSpread({isUpdate:!0,state:ey("isReserved"),setState:e_},ev("isReserved")))]}),(0,T.jsxs)(x.W,{children:[(0,T.jsx)("label",{children:"구장대여비"}),(0,T.jsx)("input",_objectSpread(_objectSpread({type:"text"},ev("cost")),{},{onChange:function(e){e_("cost",(0,g.X1)(e.target.value))}}))]}),(0,T.jsxs)(H,{children:[(0,T.jsxs)(x.W,{children:[(0,T.jsx)("label",{children:"주소"}),(0,T.jsx)("input",_objectSpread(_objectSpread({placeholder:"주소"},ev("location")),{},{readOnly:!0}))]}),(0,T.jsx)(f.LE,{height:"50px",onClick:handleAddressDrawer,children:"주소 검색"})]}),(0,T.jsxs)(x.W,{children:[(0,T.jsx)("label",{children:"경기장 이미지"}),ed?(0,T.jsx)(T.Fragment,{children:(0,T.jsx)("div",{onClick:clickImgFile,children:(0,T.jsx)(_.Wb,{widthInit:!0,height:"380px",backgroundImage:ed})})}):(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(B,{onClick:clickImgFile,children:(0,T.jsx)(_.FS,{height:"380px",children:(0,T.jsx)("img",{src:ed||"/images/add-image-rectangle-00.png",alt:"경기장 이미지"})})})}),(0,T.jsx)("input",{id:"courtPhoto",type:"file",style:{display:"none"},ref:es,onChange:function(e){var t=e.target.files[0],n=new FileReader;n.onload=function(e){ep(e.target.result)},ec(t),n.readAsDataURL(t)},accept:"image/jpeg, image/png"})]}),(0,T.jsxs)(x.W,{children:[(0,T.jsx)("label",{children:"본문 내용"}),(0,T.jsx)(W,_objectSpread({onChange:function(e){return e_("content",e.target.value)},placeholder:"내용을 입력하세요."},ev("content")))]})]}),(0,T.jsx)(K,{children:(0,T.jsx)(f.h$,{disabled:![eO("title"),eO("matchingType"),eO("recruitNum"),eO("ageGroup"),eO("ntrp"),p,P,Y,ee,er,eO("isReserved"),eO("cost"),eO("location"),ed,eO("content")].every(function(e){return null!=e&&""!==e}),onClick:eN,children:"수정하기"})}),(0,T.jsx)(w.Z,{title:"주소 검색",isOpen:eh,placement:"bottom",height:"100%",toggleDrawer:handleAddressDrawer,children:(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(M,{children:[(0,T.jsx)(x.W,{children:(0,T.jsx)("input",_objectSpread({id:"registerAddress",placeholder:"우편번호"},ew("address")))}),(0,T.jsx)(f.LE,{height:"50px",onClick:eR(eI),children:"주소 검색"})]}),(0,T.jsx)(q,{children:(0,T.jsxs)("p",{children:["찾으시려는 도로명주소, 동(읍/면/리) 또는 건물명을 입력해주세요.",(0,T.jsx)("br",{}),"(예 : 판교동, 판교원로 68, 판교실리콘파크)"]})}),(0,T.jsx)(_.WF,{}),(0,T.jsx)(F,{children:null==eg?void 0:eg.map(function(e){return(0,T.jsxs)(L,{onClick:function(){onClickAddressItem(e)},children:[(0,T.jsxs)(G,{children:[(0,T.jsxs)(z,{children:[(0,T.jsx)(R.c,{color:y.K6,children:"도로명"}),(0,T.jsx)("p",{children:e.roadAddr})]}),(0,T.jsxs)(z,{children:[(0,T.jsx)(R.c,{children:"지번"}),(0,T.jsx)("p",{children:e.jibunAddr})]})]}),(0,T.jsx)(U,{children:e.zipNo})]},(0,I.Z)())})})]})})]})}var C=p.ZP.div.withConfig({displayName:"id__PageTitleArea",componentId:"sc-1m3gbtk-0"})(["margin:"," auto;"],(0,u.hO)("50px")),A=p.ZP.div.withConfig({displayName:"id__PostMatchingFormBox",componentId:"sc-1m3gbtk-1"})([""]),Q=p.ZP.div.withConfig({displayName:"id__HalfBox",componentId:"sc-1m3gbtk-2"})(["display:flex;justify-content:space-between;div.input__InputBox-sc-7b0p27-0{flex-basis:",";&:first-child{margin-right:",";}}"],function(e){return e.theme.isResponsive?(0,g.Q1)("280px"):(0,u.hO)("280px")},function(e){return e.theme.isResponsive?(0,g.Q1)("20px"):(0,u.hO)("20px")}),B=p.ZP.div.withConfig({displayName:"id__ImageSection",componentId:"sc-1m3gbtk-3"})(["cursor:pointer;border:none;margin-bottom:",";border-radius:5px;border:1px solid ",";background:",";overflow:hidden;div.box__ImageBox-sc-1o0dgyy-0{width:auto !important;}img{width:100%;display:block;}"],function(e){return e.theme.isResponsive?(0,g.Q1)("30px"):(0,u.hO)("30px")},y.B_,y._2),W=(0,p.ZP)(O.K).withConfig({displayName:"id__MainTextArea",componentId:"sc-1m3gbtk-4"})(["max-width:",";height:",";"],function(e){return e.theme.isResponsive?(0,g.Q1)("620px"):(0,u.hO)("620px")},function(e){return e.theme.isResponsive?(0,g.Q1)("400px"):(0,u.hO)("400px")}),M=p.ZP.div.withConfig({displayName:"id__InputNoTitleButtonBox",componentId:"sc-1m3gbtk-5"})(["display:flex;justify-content:space-between;align-items:center;margin-bottom:",";.input__InputBox-sc-7b0p27-0{flex-basis:",";margin-bottom:0 !important;}.buttons__SquareButton-sc-1doc049-1{flex-basis:",";margin-left:",";}"],function(e){return e.theme.isResponsive?(0,g.Q1)("20px"):(0,u.hO)("20px")},function(e){return e.theme.isResponsive?(0,g.Q1)("380px"):(0,u.hO)("380px")},function(e){return e.theme.isResponsive?(0,g.Q1)("180px"):(0,u.hO)("180px")},function(e){return e.theme.isResponsive?(0,g.Q1)("20px"):(0,u.hO)("20px")}),q=p.ZP.div.withConfig({displayName:"id__DescTextBox",componentId:"sc-1m3gbtk-6"})(["margin-bottom:",";p{font-size:",";color:",";font-family:Pretendard-Regular;line-height:",";}"],function(e){return e.theme.isResponsive?(0,g.Q1)("20px"):(0,u.hO)("20px")},function(e){return e.theme.isResponsive?(0,g.Q1)(y.Mz):(0,u.hO)(y.Mz)},y.R4,(0,u.hO)(y.Aq)),F=p.ZP.div.withConfig({displayName:"id__AddressContainer",componentId:"sc-1m3gbtk-7"})(["margin-top:",";"],function(e){return e.theme.isResponsive?(0,g.Q1)("20px"):(0,u.hO)("20px")}),L=p.ZP.div.withConfig({displayName:"id__AddressBoxWrap",componentId:"sc-1m3gbtk-8"})(["display:flex;justify-content:space-between;background-color:",";border:1px solid ",";border-radius:5px;padding:",";margin-bottom:",";cursor:pointer;-webkit-tap-highlight-color:transparent !important;&:hover{background-color:#efefef;}"],y._2,y.B_,function(e){return e.theme.isResponsive?(0,g.Q1)("15px"):(0,u.hO)("15px")},function(e){return e.theme.isResponsive?(0,g.Q1)("10px"):(0,u.hO)("10px")}),G=p.ZP.div.withConfig({displayName:"id__AddLeftWrap",componentId:"sc-1m3gbtk-9"})(["margin-right:",";"],function(e){return e.theme.isResponsive?(0,g.Q1)("20px"):(0,u.hO)("20px")}),z=p.ZP.div.withConfig({displayName:"id__AddressBox",componentId:"sc-1m3gbtk-10"})(["display:flex;align-items:center;&:first-child{margin-bottom:",";}p{margin-left:",";font-size:",";font-family:Pretendard-Regular;line-height:",";}"],function(e){return e.theme.isResponsive?(0,g.Q1)("10px"):(0,u.hO)("10px")},function(e){return e.theme.isResponsive?(0,g.Q1)("10px"):(0,u.hO)("10px")},function(e){return e.theme.isResponsive?(0,g.Q1)(y.Mz):(0,u.hO)(y.Mz)},function(e){return e.theme.isResponsive?(0,g.Q1)(y.OI):(0,u.hO)(y.OI)}),U=p.ZP.div.withConfig({displayName:"id__AddRightWrap",componentId:"sc-1m3gbtk-11"})(["display:flex;justify-content:center;align-items:center;font-size:",";font-family:Pretendard-Regular;color:",";"],function(e){return e.theme.isResponsive?(0,g.Q1)(y.OI):(0,u.hO)(y.OI)},y.SK),H=p.ZP.div.withConfig({displayName:"id__InputButtonBox",componentId:"sc-1m3gbtk-12"})(["display:flex;justify-content:space-between;.input__InputBox-sc-7b0p27-0{flex-basis:",";}.buttons__SquareButton-sc-1doc049-1{flex-basis:",";margin-top:",";margin-left:",";}"],function(e){return e.theme.isResponsive?(0,g.Q1)("380px"):(0,u.hO)("380px")},function(e){return e.theme.isResponsive?(0,g.Q1)("180px"):(0,u.hO)("180px")},function(e){return e.theme.isResponsive?(0,g.Q1)("26px"):(0,u.hO)("26px")},function(e){return e.theme.isResponsive?(0,g.Q1)("20px"):(0,u.hO)("20px")}),K=p.ZP.div.withConfig({displayName:"id__SubmitBtnWrapper",componentId:"sc-1m3gbtk-13"})(["margin-bottom:50px;"])},2767:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/editMatching/[id]",function(){return n(7702)}])}},function(e){e.O(0,[536,216,19,791,222,160,618,774,888,179],function(){return e(e.s=2767)}),_N_E=e.O()}]);